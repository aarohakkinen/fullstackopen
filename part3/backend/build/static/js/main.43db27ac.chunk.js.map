{"version":3,"sources":["components/Filter.js","components/Form.js","components/Notification.js","components/Numbers.js","services/persons.js","App.js","index.js"],"names":["Filter","handleFilterChange","onChange","Form","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","type","Notification","successMessage","errorMessage","className","Numbers","filteredPersons","removePerson","map","person","key","name","number","onClick","baseUrl","axios","get","then","response","data","nameObject","post","delete","id","put","App","useState","filter","setFilter","persons","setPersons","setFilteredPersons","setNewName","setNewNumber","setSuccessMessage","setErrorMessage","useEffect","personService","event","target","RegExp","test","preventDefault","index","findIndex","window","confirm","splice","setTimeout","catch","x","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43db27ac.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ handleFilterChange }) => (\r\n  <div>\r\n    filter shown with <input onChange={handleFilterChange} />\r\n  </div>\r\n);\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Form = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => (\r\n  <form onSubmit={addPerson}>\r\n    <div>\r\n      name: <input value={newName} onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber} onChange={handleNumberChange} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ successMessage, errorMessage }) => {\r\n  if (successMessage !== null) {\r\n    return <div className=\"success\">{successMessage}</div>;\r\n  } else if (errorMessage !== null) {\r\n    return <div className=\"error\">{errorMessage}</div>;\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst Numbers = ({ filteredPersons, removePerson }) =>\r\n  filteredPersons.map(person => (\r\n    <div key={person.name}>\r\n      {person.name} {person.number}\r\n      <button onClick={() => removePerson(person)}>delete</button>\r\n    </div>\r\n  ));\r\n\r\nexport default Numbers;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst fetch = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst add = nameObject => {\r\n  const request = axios.post(baseUrl, nameObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = nameObject => {\r\n  const request = axios.delete(`${baseUrl}/${nameObject.id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = nameObject => {\r\n  const request = axios.put(`${baseUrl}/${nameObject.id}`, nameObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { fetch, add, remove, update };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport Form from \"./components/Form\";\r\nimport Notification from \"./components/Notification\";\r\nimport Numbers from \"./components/Numbers\";\r\nimport personService from \"./services/persons\";\r\nimport \"./index.css\";\r\n\r\nconst App = () => {\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [persons, setPersons] = useState([]);\r\n  const [filteredPersons, setFilteredPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.fetch().then(response => {\r\n      setPersons(response);\r\n      setFilteredPersons(response);\r\n    });\r\n  }, []);\r\n\r\n  const addPerson = event => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n    const index = persons.findIndex(person => person.name === nameObject.name);\r\n\r\n    if (index !== -1 && window.confirm(nameObject.name +\r\n        \" is already added to phonebook, replace the old number with a new one?\")) {\r\n      nameObject[\"id\"] = persons[index].id;\r\n      personService\r\n        .update(nameObject)\r\n        .then(() => {\r\n          setPersons(persons.splice(index, 1, nameObject));\r\n          if (new RegExp(filter, \"i\").test(nameObject.name)) {\r\n            setFilteredPersons(\r\n              persons.filter(person =>\r\n                new RegExp(filter, \"i\").test(person.name)\r\n              )\r\n            );\r\n          }\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setSuccessMessage(`${nameObject.name} has been successfully updated`);\r\n          setTimeout(() => setSuccessMessage(null), 5000);\r\n        })\r\n        .catch(() => {\r\n          setPersons(persons.filter(x => x.id !== nameObject.id));\r\n          setFilteredPersons(\r\n            filteredPersons.filter(x => x.id !== nameObject.id)\r\n          );\r\n          setErrorMessage(`Information of ${nameObject.name} has already been removed from server`);\r\n          setTimeout(() => setErrorMessage(null), 5000);\r\n        });\r\n    } else {\r\n      personService.add(nameObject).then(response => {\r\n        setPersons(persons.concat(response));\r\n        if (new RegExp(filter, \"i\").test(response.name)) {\r\n          setFilteredPersons(filteredPersons.concat(response));\r\n        }\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n        setSuccessMessage(`${nameObject.name} has been successfully added`);\r\n        setTimeout(() => setSuccessMessage(null), 5000);\r\n      });\r\n    }\r\n  };\r\n\r\n  const removePerson = nameObject => {\r\n    if (window.confirm(\"Delete \" + nameObject.name + \"?\")) {\r\n      personService\r\n        .remove(nameObject)\r\n        .then(() => {\r\n          setSuccessMessage(`${nameObject.name} has been successfully removed`);\r\n          setTimeout(() => setSuccessMessage(null), 5000);\r\n        })\r\n        .catch(() => {\r\n          setErrorMessage(\r\n            `Information of ${nameObject.name} has already been removed from server`\r\n          );\r\n          setTimeout(() => setErrorMessage(null), 5000);\r\n        });\r\n      setPersons(persons.filter(x => x.id !== nameObject.id));\r\n      setFilteredPersons(filteredPersons.filter(x => x.id !== nameObject.id));\r\n    }\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = event => {\r\n    setFilter(event.target.value);\r\n    setFilteredPersons(\r\n      persons.filter(person =>\r\n        new RegExp(event.target.value, \"i\").test(person.name)\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification\r\n        successMessage={successMessage}\r\n        errorMessage={errorMessage}\r\n      />\r\n      <Filter handleFilterChange={handleFilterChange} />\r\n      <h2>Add a new</h2>\r\n      <Form\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Numbers filteredPersons={filteredPersons} removePerson={removePerson} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}